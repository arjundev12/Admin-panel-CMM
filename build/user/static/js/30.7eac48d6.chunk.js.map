{"version":3,"sources":["views/drivers/vehicle.js"],"names":["Vehicle","useHistory","useState","showPerPage","total","setTotal","page","setPage","index","setIndex","vehicle","setVehicle","useParams","id","useEffect","laodVehicle","a","data","offset","limit","console","log","axios","post","CONSTANT","res","warn","code","toast","docs","onInputChange","e","item","target","name","isDocumentVerify","value","_id","vehicle_owner","put","response","driverStatus","message","className","to","striped","bordered","hover","map","i","vehicle_type","vehicle_number","class","onChange","status","onPaginationChange","start","end"],"mappings":"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","file":"static/js/30.7eac48d6.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { useHistory, useLocation, Link, useParams } from 'react-router-dom'\r\nimport axios from \"axios\";\r\nimport { Button, Table } from 'react-bootstrap'\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport *as  CONSTANT from '../../constant'\r\nimport Pagination from '../pagination/pagination'\r\n\r\nconst Vehicle = () => {\r\n    const history = useHistory()\r\n    const [showPerPage, setShowPerPage] = useState(5);\r\n    const [total, setTotal] = useState(0);\r\n    const [page, setPage] = useState(1);\r\n    const [index, setIndex] = useState(1);\r\n    const [vehicle, setVehicle] = useState([]);\r\n    const { id } = useParams();\r\n    useEffect(() => {\r\n        laodVehicle(page);\r\n    }, [page, total]);\r\n    const laodVehicle = async () => {\r\n        const data = {\r\n            offset: page,\r\n            limit: 5\r\n        }\r\n        console.log(\"requset0\", data)\r\n        const res = await axios.post(`${CONSTANT.baseUrl}/api/admin/get-vehicle`, data);\r\n        console.warn(\"respons\", res.data.data)\r\n        if (res.data.code == 200) {\r\n            toast(\"List get successfully\")\r\n            await setTotal(res.data.data.total)\r\n            await setVehicle(res.data.data.docs);\r\n        } else {\r\n            toast(\"somthing went wrong\")\r\n        }\r\n    };\r\n    const onPaginationChange = (start, end) => {\r\n        console.warn(\"getee, \", start, end)\r\n        setPage(start)\r\n        setIndex(end)\r\n    };\r\n    const onInputChange = async (e, item) => {\r\n        console.warn(\"oninput change data \", item)\r\n        let data = {}\r\n        let response\r\n        if (e.target.name == 'isDocumentVerify') {\r\n            data.isDocumentVerify = e.target.value\r\n            data._id = item.vehicle_owner._id\r\n            response = await axios.put(`${CONSTANT.baseUrl}/api/admin/update-driver`, data);\r\n\r\n        }\r\n        if (e.target.name == 'status') {\r\n            data.driverStatus = e.target.value\r\n            data._id = item._id\r\n            response = await axios.put(`${CONSTANT.baseUrl}/api/admin/edit-vehicle`, data);\r\n        }\r\n\r\n        if (response.data.code == 200) {\r\n            toast(response.data.message)\r\n            laodVehicle(page)\r\n        } else {\r\n            toast(\"somthing went wrong\")\r\n        }\r\n\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <Link className=\"btn btn-primary\" to=\"/dashboard\">\r\n                back to Home\r\n       </Link>\r\n            <Table striped bordered hover>\r\n                <thead>\r\n                    <tr>\r\n                        <th>S.no</th>\r\n                        <th>Vehicle Type</th>\r\n                        <th>Vehicle Number</th>\r\n                        <th>Vehicle Owner</th>\r\n                        <th>Doc Status</th>\r\n                        <th>Status</th>\r\n\r\n                        <th>Actions</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody>\r\n                    {\r\n                        vehicle.map((item, i) => <tr>\r\n                            <td>{i + index + 1}</td>\r\n                            <td>{item.vehicle_type ? item.vehicle_type : null}</td>\r\n                            {/* <td>{item.vehicle_owner.isDocumentVerify}</td> */}\r\n                            <td>{item.vehicle_number}</td>\r\n                            <td>{item.vehicle_owner.name}</td>\r\n                            <td>\r\n                                <select class=\"form-control\" name=\"isDocumentVerify\" value={item.vehicle_owner.isDocumentVerify}\r\n                                    onChange={e => onInputChange(e, item)}>\r\n                                    <option value=\"uploade\">Uploade</option>\r\n                                    <option value=\"notupload\">Notupload</option>\r\n                                    <option value=\"verified\">Verified</option>\r\n                                    <option value=\"rejected\">Rejected</option>\r\n                                </select></td>\r\n                            <td>\r\n                                <select class=\"form-control\" name=\"status\" value={item.status}\r\n                                    onChange={e => onInputChange(e, item)}>\r\n                                    <option value=\"active\">Active</option>\r\n                                    <option value=\"inactive\">Inactive</option>\r\n                                    {/* <option value=\"blocked\">Block</option> */}\r\n                                </select></td>\r\n                            <td>\r\n                                <Link className=\"btn btn-primary mr-2\" to={`/vehicles/update/${item._id}`}> edit </Link>\r\n\r\n                            </td>\r\n                        </tr>)\r\n                    }\r\n                </tbody>\r\n            </Table>\r\n            <ToastContainer />\r\n            <Pagination\r\n                showPerPage={showPerPage}\r\n                onPaginationChange={onPaginationChange}\r\n                total={total}\r\n                page={page}\r\n            />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Vehicle\r\n"],"sourceRoot":""}